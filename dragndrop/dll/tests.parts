Import('*')

env.PartName(env.subst('tests_${TARGET_ARCH}'))

env.DependsOn([
        Component('dll.headers'),
        Component(env.subst('common.code_${TARGET_ARCH}')),
        ])

env.Append(
    CXXFLAGS=['/EHsc', '/GR'],
    LIBS=['shell32', 'user32', 'ole32', 'gdi32', 'shlwapi', 'advapi32',
        'kernel32', 'uuid'],
    )

env.Replace(
        LINKFLAGS=[x for x in env.subst_list('$LINKFLAGS')[0] if str(x).lower() != '/nodefaultlib'],
        LIBEXS=[])

env.UnitTest('mystring_test', [
        'tests/mystring_test.cpp',
        'tests/mystring_stubs.cpp',
        'src/mystring.cpp',
        'tests/main.cpp'], make_pdb=True,
        depends=[Component(env.PartName(), env.PartVersion()), 
        Component('tut')]
        )

# vim: set et ts=4 sw=4 ft=python :

